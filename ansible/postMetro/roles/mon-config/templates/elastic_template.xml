<?xml version="1.0" encoding="UTF-8"?><zabbix_export><version>4.2</version><date>2019-10-30T19:36:19Z</date><groups><group><name>Elasticsearch nodes</name></group></groups><templates><template><template>Template App Elasticsearch server</template><name>Template App Elasticsearch server</name><description>A tenmplate for checks that apply to elastic search nodes</description><groups><group><name>Elasticsearch nodes</name></group></groups><applications><application><name>HTTP agent</name></application><application><name>Web check</name></application></applications><items><item><name>Elasticsearch cluster status</name><type>19</type><snmp_community/><snmp_oid/><key>es.cluster.status</key><delay>30s</delay><history>90d</history><trends>365d</trends><status>0</status><value_type>3</value_type><allowed_hosts/><units/><snmpv3_contextname/><snmpv3_securityname/><snmpv3_securitylevel>0</snmpv3_securitylevel><snmpv3_authprotocol>0</snmpv3_authprotocol><snmpv3_authpassphrase/><snmpv3_privprotocol>0</snmpv3_privprotocol><snmpv3_privpassphrase/><params/><ipmi_sensor/><authtype>0</authtype><username/><password/><publickey/><privatekey/><port/><description>Cluster states:&#13;&#13;0 - green (OK)&#13;1 - yellow (some shards are down but read/writes to db still work&#13;2 - red (too many shards are down...no read/write to dB until state changes to yellow/green)&#13;3 - unknown state caused nothing return, no connectivity, failure to parse data (</description><inventory_link>0</inventory_link><applications><application><name>HTTP agent</name></application></applications><valuemap/><logtimefmt/><preprocessing><step><type>12</type><params>$.status</params><error_handler>2</error_handler><error_handler_params>3</error_handler_params></step><step><type>5</type><params>(.*)\1:green=0:yellow=1:red=2</params><error_handler>0</error_handler><error_handler_params/></step><step><type>5</type><params>(green|yellow|red)(?=.*:\1=(\d))\2</params><error_handler>2</error_handler><error_handler_params>3</error_handler_params></step></preprocessing><jmx_endpoint/><timeout>10s</timeout><url>http://{HOST.HOST}:9200/_cluster/health</url><query_fields/><posts/><status_codes>200</status_codes><follow_redirects>1</follow_redirects><post_type>0</post_type><http_proxy/><headers/><retrieve_mode>0</retrieve_mode><request_method>0</request_method><output_format>0</output_format><allow_traps>0</allow_traps><ssl_cert_file/><ssl_key_file/><ssl_key_password/><verify_peer>0</verify_peer><verify_host>0</verify_host><master_item/></item></items><discovery_rules/><httptests><httptest><name>Elasticsearch checks</name><application><name>Web check</name></application><delay>1m</delay><attempts>1</attempts><agent>Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.104 Safari/537.36</agent><http_proxy/><variables/><headers/><status>0</status><authentication>0</authentication><http_user/><http_password/><verify_peer>0</verify_peer><verify_host>0</verify_host><ssl_cert_file/><ssl_key_file/><ssl_key_password/><steps><step><name>ES cluster status</name><url>http://{HOST.HOST}:9200/_cat/health</url><query_fields/><posts/><variables/><headers/><follow_redirects>1</follow_redirects><retrieve_mode>0</retrieve_mode><timeout>15s</timeout><required>nuage_elasticsearch green</required><status_codes>200</status_codes></step></steps></httptest></httptests><macros/><templates/><screens/><tags><tag><tag>InUse</tag><value>Yes</value></tag></tags></template></templates><triggers><trigger><expression>{Template App Elasticsearch server:web.test.rspcode[Elasticsearch checks,ES cluster status].last()}&lt;&gt;200</expression><recovery_mode>0</recovery_mode><recovery_expression/><name>ES cluster status</name><correlation_mode>0</correlation_mode><correlation_tag/><url/><status>0</status><priority>4</priority><description/><type>0</type><manual_close>0</manual_close><dependencies/><tags/></trigger><trigger><expression>{Template App Elasticsearch server:web.test.fail[Elasticsearch checks].sum(#5)}&gt;=5</expression><recovery_mode>0</recovery_mode><recovery_expression/><name>ES cluster test failure</name><correlation_mode>0</correlation_mode><correlation_tag/><url/><status>0</status><priority>4</priority><description/><type>0</type><manual_close>0</manual_close><dependencies/><tags/></trigger></triggers></zabbix_export>