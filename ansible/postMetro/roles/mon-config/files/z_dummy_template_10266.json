{"zabbix_export": {"date": "2020-02-29T02:04:21Z", "templates": [{"templates": [], "description": "A tenmplate for checks that apply to elastic search nodes", "tags": [{"tag": "InUse", "value": "Yes"}, {"tag": "WL", "value": "Yes"}], "items": [{"allow_traps": "0", "snmpv3_contextname": "", "ssl_cert_file": "", "inventory_link": "0", "query_fields": [], "http_proxy": "", "trends": "365d", "post_type": "0", "snmpv3_authpassphrase": "", "snmp_oid": "", "snmpv3_securitylevel": "0", "port": "", "ssl_key_file": "", "logtimefmt": "", "jmx_endpoint": "", "master_item": [], "delay": "30s", "publickey": "", "request_method": "0", "params": "", "follow_redirects": "1", "units": "", "verify_host": "0", "type": "19", "snmpv3_authprotocol": "0", "valuemap": [], "ipmi_sensor": "", "username": "", "authtype": "0", "snmp_community": "", "description": "Cluster states:\r\n\r\n0 - green (OK)\r\n1 - yellow (some shards are down but read/writes to db still work\r\n2 - red (too many shards are down...no read/write to dB until state changes to yellow/green)\r\n3 - unknown state caused nothing return, no connectivity, failure to parse data (", "output_format": "0", "status_codes": "200", "allowed_hosts": "", "snmpv3_securityname": "", "preprocessing": [{"error_handler_params": "3", "type": "12", "error_handler": "2", "params": "$.status"}, {"error_handler_params": "", "type": "5", "error_handler": "0", "params": "(.*)\n\\1:green=0:yellow=1:red=2"}, {"error_handler_params": "3", "type": "5", "error_handler": "2", "params": "(green|yellow|red)(?=.*:\\1=(\\d))\n\\2"}], "value_type": "3", "key": "es.cluster.status", "retrieve_mode": "0", "privatekey": "", "ssl_key_password": "", "password": "", "snmpv3_privpassphrase": "", "snmpv3_privprotocol": "0", "name": "Elasticsearch cluster status", "applications": [{"name": "HTTP agent"}], "url": "http://{HOST.HOST}:9200/_cluster/health", "posts": "", "headers": [], "status": "0", "timeout": "10s", "verify_peer": "0", "history": "90d"}], "httptests": [{"status": "0", "verify_host": "0", "name": "Elasticsearch checks", "application": {"name": "Web check"}, "variables": [], "http_proxy": "", "attempts": "1", "agent": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.104 Safari/537.36", "delay": "1m", "headers": [], "authentication": "0", "steps": [{"name": "ES cluster status", "url": "http://{HOST.HOST}:9200/_cat/health", "follow_redirects": "1", "variables": [], "required": "nuage_elasticsearch green", "posts": "", "headers": [], "query_fields": [], "timeout": "15s", "retrieve_mode": "0", "status_codes": "200"}], "http_user": "", "ssl_cert_file": "", "ssl_key_password": "", "verify_peer": "0", "http_password": "", "ssl_key_file": ""}], "screens": [], "applications": [{"name": "HTTP agent"}, {"name": "Web check"}], "discovery_rules": [], "groups": [{"name": "Elasticsearch nodes"}], "template": "Template App Elasticsearch server", "macros": [], "name": "Template App Elasticsearch server"}], "version": "4.2", "groups": [{"name": "Elasticsearch nodes"}], "triggers": [{"status": "0", "recovery_mode": "0", "description": "", "tags": [], "url": "", "type": "0", "priority": "4", "correlation_tag": "", "dependencies": [], "correlation_mode": "0", "manual_close": "0", "expression": "{Template App Elasticsearch server:web.test.rspcode[Elasticsearch checks,ES cluster status].last()}<>200", "recovery_expression": "", "name": "ES cluster status"}, {"status": "0", "recovery_mode": "0", "description": "", "tags": [], "url": "", "type": "0", "priority": "4", "correlation_tag": "", "dependencies": [], "correlation_mode": "0", "manual_close": "0", "expression": "{Template App Elasticsearch server:web.test.fail[Elasticsearch checks].sum(#5)}>=5", "recovery_expression": "", "name": "ES cluster test failure"}]}}